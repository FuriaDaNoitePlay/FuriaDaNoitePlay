<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel ADM - Rifa do Guerreiro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a, #1a1a2e);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Cabe√ßalho ADM */
        .admin-header {
            background: rgba(20, 0, 0, 0.9);
            border: 3px solid #ff0000;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 0 25px rgba(255, 0, 0, 0.5);
            position: relative;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .admin-title {
            color: #ff4444;
            font-size: 2rem;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        }
        
        .back-btn {
            background: linear-gradient(135deg, #333, #111);
            color: #ff4444;
            border: 2px solid #ff0000;
            padding: 10px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: linear-gradient(135deg, #444, #222);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .admin-stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #ff4444;
        }
        
        .admin-stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff4444;
            margin: 5px 0;
        }
        
        .admin-stat-label {
            color: #ccc;
            font-size: 0.9rem;
        }
        
        /* Pain√©is ADM */
        .admin-panels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .admin-panel {
            background: rgba(20, 20, 30, 0.9);
            border: 2px solid #ff0000;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
            height: fit-content;
        }
        
        .panel-title {
            color: #ff4444;
            font-size: 1.4rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #444;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Controle de N√∫meros */
        .number-control {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .number-input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #ff4444;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        
        .action-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #ff0000, #ff4444);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .action-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #cc0000, #ff2222);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.4);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .action-btn.green {
            background: linear-gradient(135deg, #006400, #228B22);
        }
        
        .action-btn.green:hover:not(:disabled) {
            background: linear-gradient(135deg, #008000, #32CD32);
        }
        
        .action-btn.red {
            background: linear-gradient(135deg, #8B0000, #B22222);
        }
        
        .action-btn.red:hover:not(:disabled) {
            background: linear-gradient(135deg, #A52A2A, #DC143C);
        }
        
        .action-btn.blue {
            background: linear-gradient(135deg, #00008B, #191970);
        }
        
        .action-btn.blue:hover:not(:disabled) {
            background: linear-gradient(135deg, #0000CD, #4169E1);
        }
        
        /* Lista de N√∫meros Pendentes */
        .pending-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .pending-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #444;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .pending-info {
            flex: 1;
        }
        
        .pending-number {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ff4444;
        }
        
        .pending-user {
            color: #ccc;
            margin: 5px 0;
        }
        
        .pending-date {
            color: #888;
            font-size: 0.8rem;
        }
        
        .pending-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Tabela de N√∫meros */
        .numbers-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .numbers-table th {
            background: rgba(255, 0, 0, 0.2);
            color: #ff9999;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #ff0000;
        }
        
        .numbers-table td {
            padding: 12px;
            border-bottom: 1px solid #333;
        }
        
        .numbers-table tr:hover {
            background: rgba(255, 0, 0, 0.05);
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .status-available {
            background: rgba(0, 255, 0, 0.1);
            color: #00ff00;
            border: 1px solid #00ff00;
        }
        
        .status-pending {
            background: rgba(255, 165, 0, 0.1);
            color: #ffa500;
            border: 1px solid #ffa500;
        }
        
        .status-confirmed {
            background: rgba(0, 0, 255, 0.1);
            color: #4169E1;
            border: 1px solid #4169E1;
        }
        
        .status-sold {
            background: rgba(255, 0, 0, 0.1);
            color: #ff4444;
            border: 1px solid #ff4444;
        }
        
        /* Bot√µes de a√ß√£o na tabela */
        .table-actions {
            display: flex;
            gap: 5px;
        }
        
        .table-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }
        
        .confirm-btn {
            background: rgba(0, 255, 0, 0.1);
            color: #00ff00;
            border: 1px solid #00ff00;
        }
        
        .confirm-btn:hover {
            background: rgba(0, 255, 0, 0.3);
        }
        
        .cancel-btn {
            background: rgba(255, 0, 0, 0.1);
            color: #ff4444;
            border: 1px solid #ff4444;
        }
        
        .cancel-btn:hover {
            background: rgba(255, 0, 0, 0.3);
        }
        
        .edit-btn {
            background: rgba(255, 165, 0, 0.1);
            color: #ffa500;
            border: 1px solid #ffa500;
        }
        
        .edit-btn:hover {
            background: rgba(255, 165, 0, 0.3);
        }
        
        /* Notifica√ß√£o ADM */
        .admin-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #333, #111);
            border: 2px solid #ff0000;
            border-radius: 10px;
            padding: 20px;
            max-width: 350px;
            box-shadow: 0 0 25px rgba(255, 0, 0, 0.5);
            z-index: 1000;
            display: none;
            animation: slideIn 0.5s ease;
        }
        
        .admin-notification.show {
            display: block;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-title {
            color: #ff4444;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        /* Modal de edi√ß√£o */
        .admin-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #0a0a0a);
            border: 3px solid #ff0000;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.5);
        }
        
        .modal-title {
            color: #ff4444;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5rem;
        }
        
        .modal-input-group {
            margin-bottom: 20px;
        }
        
        .modal-label {
            display: block;
            color: #ff9999;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        .modal-input {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #ff4444;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-confirm {
            background: linear-gradient(135deg, #ff0000, #ff4444);
            color: white;
        }
        
        .modal-confirm:hover {
            background: linear-gradient(135deg, #cc0000, #ff2222);
            transform: translateY(-2px);
        }
        
        .modal-cancel {
            background: linear-gradient(135deg, #333, #555);
            color: white;
        }
        
        .modal-cancel:hover {
            background: linear-gradient(135deg, #444, #666);
            transform: translateY(-2px);
        }
        
        /* Responsividade */
        @media (max-width: 1100px) {
            .admin-panels {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .number-control {
                flex-direction: column;
            }
            
            .numbers-table {
                font-size: 0.9rem;
            }
            
            .numbers-table th,
            .numbers-table td {
                padding: 8px;
            }
            
            .table-actions {
                flex-direction: column;
                gap: 3px;
            }
        }
        
        @media (max-width: 480px) {
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .admin-title {
                font-size: 1.5rem;
            }
            
            .admin-panel {
                padding: 15px;
            }
            
            .panel-title {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Notifica√ß√£o ADM -->
    <div class="admin-notification" id="adminNotification">
        <h4 class="notification-title" id="notificationTitle">üì° ATUALIZA√á√ÉO</h4>
        <p id="notificationText">Sistema de comunica√ß√£o ativo</p>
    </div>
    
    <!-- Modal de Edi√ß√£o -->
    <div class="admin-modal" id="editModal">
        <div class="modal-content">
            <h3 class="modal-title">‚úèÔ∏è EDITAR COMPRADOR</h3>
            
            <div class="modal-input-group">
                <label class="modal-label">N√∫mero do Guerreiro:</label>
                <input type="text" id="modalNumber" class="modal-input" readonly>
            </div>
            
            <div class="modal-input-group">
                <label class="modal-label">Nome do Guerreiro:</label>
                <input type="text" id="modalWarrior" class="modal-input" readonly>
            </div>
            
            <div class="modal-input-group">
                <label class="modal-label">Nome do Comprador:</label>
                <input type="text" id="modalBuyer" class="modal-input" placeholder="Digite o nome do comprador">
            </div>
            
            <div class="modal-input-group">
                <label class="modal-label">Telefone/WhatsApp:</label>
                <input type="text" id="modalPhone" class="modal-input" placeholder="(00) 00000-0000">
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn modal-confirm" id="modalConfirmBtn">
                    <i class="fas fa-check"></i> CONFIRMAR
                </button>
                <button class="modal-btn modal-cancel" id="modalCancelBtn">
                    <i class="fas fa-times"></i> CANCELAR
                </button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Cabe√ßalho ADM -->
        <div class="admin-header">
            <div class="header-top">
                <h1 class="admin-title">
                    <i class="fas fa-user-shield"></i> PAINEL ADMINISTRATIVO
                </h1>
                <a href="comun.html" class="back-btn">
                    <i class="fas fa-arrow-left"></i> VOLTAR PARA P√ÅGINA PRINCIPAL
                </a>
            </div>
            
            <p style="color: #ccc; margin-bottom: 15px;">
                Painel de controle da Rifa do Guerreiro - FuriaDaNoitePlay
            </p>
            
            <div class="admin-stats">
                <div class="admin-stat">
                    <div class="admin-stat-label">TOTAL DE N√öMEROS</div>
                    <div class="admin-stat-value" id="totalNumbers">31</div>
                </div>
                
                <div class="admin-stat">
                    <div class="admin-stat-label">SELECIONADOS</div>
                    <div class="admin-stat-value" id="selectedNumbers">0</div>
                    <div class="admin-stat-label" id="selectedPercent">0%</div>
                </div>
                
                <div class="admin-stat">
                    <div class="admin-stat-label">CONFIRMADOS</div>
                    <div class="admin-stat-value" id="confirmedNumbers">0</div>
                    <div class="admin-stat-label">Pagamentos OK</div>
                </div>
                
                <div class="admin-stat">
                    <div class="admin-stat-label">PENDENTES</div>
                    <div class="admin-stat-value" id="pendingNumbers">0</div>
                    <div class="admin-stat-label">Aguardando ADM</div>
                </div>
            </div>
        </div>
        
        <!-- Pain√©is ADM -->
        <div class="admin-panels">
            <!-- Painel de Controle -->
            <div class="admin-panel">
                <h3 class="panel-title">
                    <i class="fas fa-gamepad"></i> CONTROLE DE N√öMEROS
                </h3>
                
                <div class="number-control">
                    <input type="number" 
                           id="controlNumber" 
                           class="number-input" 
                           placeholder="Digite o n√∫mero (1-31)"
                           min="1" 
                           max="31">
                    <button class="action-btn" id="checkNumberBtn">
                        <i class="fas fa-search"></i> VERIFICAR
                    </button>
                </div>
                
                <div id="numberInfo" style="margin-bottom: 20px; display: none;">
                    <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; border-left: 4px solid #ff4444;">
                        <h4 style="color: #ff4444; margin-bottom: 10px;">INFORMA√á√ïES DO N√öMERO <span id="infoNumber">0</span></h4>
                        <p><strong>Guerreiro:</strong> <span id="infoWarrior">-</span></p>
                        <p><strong>Status:</strong> <span id="infoStatus">-</span></p>
                        <p><strong>Comprador:</strong> <span id="infoBuyer">-</span></p>
                        <p><strong>Data:</strong> <span id="infoDate">-</span></p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <button class="action-btn green" id="confirmNumberBtn" disabled>
                        <i class="fas fa-check-circle"></i> CONFIRMAR PAGAMENTO
                    </button>
                    <button class="action-btn red" id="cancelNumberBtn" disabled>
                        <i class="fas fa-times-circle"></i> CANCELAR SELE√á√ÉO
                    </button>
                    <button class="action-btn blue" id="editNumberBtn" disabled>
                        <i class="fas fa-edit"></i> EDITAR COMPRADOR
                    </button>
                    <button class="action-btn" id="forceSelectBtn">
                        <i class="fas fa-user-plus"></i> FOR√áAR SELE√á√ÉO
                    </button>
                </div>
            </div>
            
            <!-- Painel de Pendentes -->
            <div class="admin-panel">
                <h3 class="panel-title">
                    <i class="fas fa-clock"></i> N√öMEROS PENDENTES
                </h3>
                
                <div class="pending-list" id="pendingList">
                    <p style="text-align: center; color: #888; padding: 20px;">
                        Nenhum n√∫mero pendente de confirma√ß√£o
                    </p>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="action-btn" id="refreshBtn" style="width: 100%;">
                        <i class="fas fa-sync-alt"></i> ATUALIZAR LISTA
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Tabela de N√∫meros -->
        <div class="admin-panel">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 class="panel-title">
                    <i class="fas fa-list-ol"></i> TABELA COMPLETA DE N√öMEROS
                </h3>
                <button class="action-btn blue" id="exportBtn">
                    <i class="fas fa-download"></i> EXPORTAR DADOS
                </button>
            </div>
            
            <table class="numbers-table">
                <thead>
                    <tr>
                        <th width="80">N¬∫</th>
                        <th>Guerreiro</th>
                        <th width="120">Status</th>
                        <th>Comprador</th>
                        <th width="100">Valor</th>
                        <th width="150">Data</th>
                        <th width="180">A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="numbersTable">
                    <!-- Tabela ser√° preenchida por JavaScript -->
                </tbody>
            </table>
        </div>
        
        <!-- Painel de Relat√≥rios -->
        <div class="admin-panel">
            <h3 class="panel-title">
                <i class="fas fa-chart-bar"></i> RELAT√ìRIOS E ESTAT√çSTICAS
            </h3>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                <div>
                    <h4 style="color: #ff9999; margin-bottom: 10px;">ARRECADA√á√ÉO</h4>
                    <div style="font-size: 1.8rem; color: #00ff00; font-weight: bold;" id="totalAmount">
                        R$ 0,00
                    </div>
                    <div style="color: #888; font-size: 0.9rem;">Valor total arrecadado</div>
                </div>
                
                <div>
                    <h4 style="color: #ff9999; margin-bottom: 10px;">PR√äMIO TOTAL</h4>
                    <div style="font-size: 1.8rem; color: #ffcc00; font-weight: bold;" id="totalPrize">
                        R$ 0,00
                    </div>
                    <div style="color: #888; font-size: 0.9rem;">60% da arrecada√ß√£o</div>
                </div>
                
                <div>
                    <h4 style="color: #ff9999; margin-bottom: 10px;">TOTAL DE PARTICIPANTES</h4>
                    <div style="font-size: 1.8rem; color: #ff4444; font-weight: bold;" id="totalParticipants">
                        0
                    </div>
                    <div style="color: #888; font-size: 0.9rem;">Compradores √∫nicos</div>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <button class="action-btn green" id="generateReportBtn" style="width: 100%;">
                    <i class="fas fa-file-pdf"></i> GERAR RELAT√ìRIO COMPLETO
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sistema ADM da Rifa do Guerreiro
        
        // ==================== CONFIGURA√á√ÉO ====================
        const ADM_CONFIG = {
            TOTAL_NUMEROS: 31,
            PRECO_NUMERO: 3.00,
            SENHA_ADM: 'FuriaMLBB2024!',
            GUERREIROS: [
                "Alucard", "Miya", "Zilong", "Layla", "Chou", "Gusion", "Harley", 
                "Lancelot", "Fanny", "Kagura", "Hayabusa", "Claude", "Karrie", 
                "Granger", "Bruno", "Wanwan", "Clint", "Lesley", "Beatrix", "Brody",
                "Esmeralda", "Lunox", "Harith", "Cecilion", "Pharsa", "Odette", 
                "Yve", "Valentina", "Xavier", "Lylia", "Benedetta"
            ]
        };
        
        // ==================== ELEMENTOS DOM ====================
        const elements = {
            // Estat√≠sticas
            totalNumbers: document.getElementById('totalNumbers'),
            selectedNumbers: document.getElementById('selectedNumbers'),
            confirmedNumbers: document.getElementById('confirmedNumbers'),
            pendingNumbers: document.getElementById('pendingNumbers'),
            selectedPercent: document.getElementById('selectedPercent'),
            totalAmount: document.getElementById('totalAmount'),
            totalPrize: document.getElementById('totalPrize'),
            totalParticipants: document.getElementById('totalParticipants'),
            
            // Controle de n√∫meros
            controlNumber: document.getElementById('controlNumber'),
            checkNumberBtn: document.getElementById('checkNumberBtn'),
            confirmNumberBtn: document.getElementById('confirmNumberBtn'),
            cancelNumberBtn: document.getElementById('cancelNumberBtn'),
            editNumberBtn: document.getElementById('editNumberBtn'),
            forceSelectBtn: document.getElementById('forceSelectBtn'),
            numberInfo: document.getElementById('numberInfo'),
            infoNumber: document.getElementById('infoNumber'),
            infoWarrior: document.getElementById('infoWarrior'),
            infoStatus: document.getElementById('infoStatus'),
            infoBuyer: document.getElementById('infoBuyer'),
            infoDate: document.getElementById('infoDate'),
            
            // Lista de pendentes
            pendingList: document.getElementById('pendingList'),
            refreshBtn: document.getElementById('refreshBtn'),
            
            // Tabela de n√∫meros
            numbersTable: document.getElementById('numbersTable'),
            exportBtn: document.getElementById('exportBtn'),
            
            // Notifica√ß√£o
            adminNotification: document.getElementById('adminNotification'),
            notificationTitle: document.getElementById('notificationTitle'),
            notificationText: document.getElementById('notificationText'),
            
            // Modal
            editModal: document.getElementById('editModal'),
            modalNumber: document.getElementById('modalNumber'),
            modalWarrior: document.getElementById('modalWarrior'),
            modalBuyer: document.getElementById('modalBuyer'),
            modalPhone: document.getElementById('modalPhone'),
            modalConfirmBtn: document.getElementById('modalConfirmBtn'),
            modalCancelBtn: document.getElementById('modalCancelBtn'),
            
            // Relat√≥rios
            generateReportBtn: document.getElementById('generateReportBtn')
        };
        
        // ==================== VARI√ÅVEIS DE ESTADO ====================
        let currentSelectedNumber = null;
        let admData = {
            numerosSelecionados: [],
            numerosConfirmados: [],
            numerosPendentes: [],
            compradores: {},
            historico: []
        };
        
        // ==================== INICIALIZA√á√ÉO ====================
        function initADMSystem() {
            console.log('‚öôÔ∏è Inicializando sistema ADM...');
            
            // Verificar autentica√ß√£o
            if (!checkAuth()) {
                return;
            }
            
            // Carregar dados
            loadADMData();
            
            // Configurar eventos
            setupEventListeners();
            
            // Configurar comunica√ß√£o com outras p√°ginas
            setupCommunication();
            
            // Atualizar interface
            updateADMInterface();
            
            console.log('‚úÖ Sistema ADM inicializado!');
        }
        
        // ==================== AUTENTICA√á√ÉO ====================
        function checkAuth() {
            const loggedIn = localStorage.getItem('adminLoggedIn');
            const loginTime = localStorage.getItem('adminLoginTime');
            
            if (!loggedIn || !loginTime) {
                showNotification('üîí Acesso n√£o autorizado', 'Voc√™ precisa fazer login como administrador.');
                setTimeout(() => {
                    window.location.href = 'comun.html';
                }, 2000);
                return false;
            }
            
            // Verificar tempo da sess√£o (8 horas)
            const sessionTime = 8 * 60 * 60 * 1000; // 8 horas em milissegundos
            const now = Date.now();
            
            if (now - parseInt(loginTime) > sessionTime) {
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminLoginTime');
                showNotification('‚è∞ Sess√£o expirada', 'Sua sess√£o expirou. Fa√ßa login novamente.');
                setTimeout(() => {
                    window.location.href = 'comun.html';
                }, 2000);
                return false;
            }
            
            return true;
        }
        
        // ==================== CARREGAMENTO DE DADOS ====================
        function loadADMData() {
            console.log('üìÇ Carregando dados ADM...');
            
            // Carregar dados da comunica√ß√£o com outras p√°ginas
            admData.numerosSelecionados = JSON.parse(
                localStorage.getItem('rifa_com_selecionados') || '[]'
            );
            
            admData.numerosConfirmados = JSON.parse(
                localStorage.getItem('rifa_com_confirmados') || '[]'
            );
            
            admData.numerosPendentes = JSON.parse(
                localStorage.getItem('rifa_com_pendentes') || '[]'
            );
            
            // Carregar dados espec√≠ficos do ADM
            const savedData = localStorage.getItem('rifa_adm_data');
            if (savedData) {
                const parsed = JSON.parse(savedData);
                admData.compradores = parsed.compradores || {};
                admData.historico = parsed.historico || [];
            }
            
            console.log('üìä Dados carregados:', {
                selecionados: admData.numerosSelecionados.length,
                confirmados: admData.numerosConfirmados.length,
                pendentes: admData.numerosPendentes.length
            });
        }
        
        // ==================== SALVAR DADOS ====================
        function saveADMData() {
            // Salvar dados espec√≠ficos do ADM
            localStorage.setItem('rifa_adm_data', JSON.stringify({
                compradores: admData.compradores,
                historico: admData.historico
            }));
            
            console.log('üíæ Dados ADM salvos');
        }
        
        // ==================== COMUNICA√á√ÉO ENTRE P√ÅGINAS ====================
        function setupCommunication() {
            // Ouvir eventos do localStorage (comunica√ß√£o de outras p√°ginas)
            window.addEventListener('storage', function(event) {
                if (event.key && event.key.startsWith('rifa_com_')) {
                    console.log('üì° Evento recebido no ADM:', event.key);
                    
                    // Recarregar dados
                    loadADMData();
                    
                    // Atualizar interface
                    updateADMInterface();
                    
                    // Mostrar notifica√ß√£o para certos eventos
                    if (event.key === 'rifa_com_ultimo') {
                        showNotification('üéØ NOVA SELE√á√ÉO', 'Um n√∫mero foi selecionado na rifa!');
                    }
                }
            });
            
            // Ouvir eventos personalizados
            window.addEventListener('rifaNumeroSelecionadoComSucesso', function(event) {
                console.log('üéØ N√∫mero selecionado:', event.detail);
                showNotification('üì± NOVA SELE√á√ÉO', `N√∫mero ${event.detail.numero} selecionado!`);
                updateADMInterface();
            });
        }
        
        // ==================== ATUALIZA√á√ÉO DA INTERFACE ====================
        function updateADMInterface() {
            updateStats();
            updatePendingList();
            updateNumbersTable();
            updateNumberInfo();
        }
        
        // Atualizar estat√≠sticas
        function updateStats() {
            const total = ADM_CONFIG.TOTAL_NUMEROS;
            const selecionados = admData.numerosSelecionados.length;
            const confirmados = admData.numerosConfirmados.length;
            const pendentes = admData.numerosPendentes.length;
            const percentual = ((selecionados / total) * 100).toFixed(1);
            
            // Calcular arrecada√ß√£o
            const arrecadacao = confirmados * ADM_CONFIG.PRECO_NUMERO;
            const premio = arrecadacao * 0.6;
            
            // Contar participantes √∫nicos
            const participantes = new Set();
            Object.values(admData.compradores).forEach(comprador => {
                if (comprador.nome) participantes.add(comprador.nome);
            });
            
            // Atualizar elementos
            elements.totalNumbers.textContent = total;
            elements.selectedNumbers.textContent = selecionados;
            elements.confirmedNumbers.textContent = confirmados;
            elements.pendingNumbers.textContent = pendentes;
            elements.selectedPercent.textContent = `${percentual}%`;
            elements.totalAmount.textContent = `R$ ${arrecadacao.toFixed(2).replace('.', ',')}`;
            elements.totalPrize.textContent = `R$ ${premio.toFixed(2).replace('.', ',')}`;
            elements.totalParticipants.textContent = participantes.size;
        }
        
        // Atualizar lista de pendentes
        function updatePendingList() {
            elements.pendingList.innerHTML = '';
            
            if (admData.numerosPendentes.length === 0) {
                elements.pendingList.innerHTML = `
                    <p style="text-align: center; color: #888; padding: 20px;">
                        Nenhum n√∫mero pendente de confirma√ß√£o
                    </p>
                `;
                return;
            }
            
            // Ordenar por data (mais recente primeiro)
            const pendentesOrdenados = [...admData.numerosPendentes].sort((a, b) => 
                new Date(b.timestamp || b.data) - new Date(a.timestamp || a.data)
            );
            
            pendentesOrdenados.forEach(pendente => {
                const item = document.createElement('div');
                item.className = 'pending-item';
                
                const data = new Date(pendente.timestamp || pendente.data);
                const dataFormatada = data.toLocaleDateString('pt-BR') + ' ' + 
                                     data.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                
                item.innerHTML = `
                    <div class="pending-info">
                        <div class="pending-number">N¬∫ ${pendente.numero}</div>
                        <div class="pending-user">${pendente.usuario || 'An√¥nimo'}</div>
                        <div class="pending-date">${dataFormatada}</div>
                    </div>
                    <div class="pending-actions">
                        <button class="table-btn confirm-btn" onclick="confirmarPendente(${pendente.numero})">
                            <i class="fas fa-check"></i> Confirmar
                        </button>
                        <button class="table-btn cancel-btn" onclick="cancelarPendente(${pendente.numero})">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                    </div>
                `;
                
                elements.pendingList.appendChild(item);
            });
        }
        
        // Atualizar tabela de n√∫meros
        function updateNumbersTable() {
            elements.numbersTable.innerHTML = '';
            
            for (let i = 1; i <= ADM_CONFIG.TOTAL_NUMEROS; i++) {
                const row = document.createElement('tr');
                
                // Determinar status
                let status = 'DISPON√çVEL';
                let statusClass = 'status-available';
                let comprador = '-';
                let data = '-';
                let valor = '-';
                
                const compradorData = admData.compradores[i];
                if (compradorData) {
                    comprador = compradorData.nome || 'An√¥nimo';
                    data = new Date(compradorData.data || compradorData.timestamp).toLocaleDateString('pt-BR');
                    valor = 'R$ 3,00';
                    
                    if (admData.numerosConfirmados.includes(i)) {
                        status = 'CONFIRMADO';
                        statusClass = 'status-confirmed';
                    } else if (admData.numerosPendentes.some(p => p.numero === i)) {
                        status = 'PENDENTE';
                        statusClass = 'status-pending';
                    } else if (admData.numerosSelecionados.includes(i)) {
                        status = 'SELECIONADO';
                        statusClass = 'status-sold';
                    }
                }
                
                // N√∫mero
                const numCell = document.createElement('td');
                numCell.textContent = i;
                numCell.style.fontWeight = 'bold';
                numCell.style.color = '#ff4444';
                row.appendChild(numCell);
                
                // Guerreiro
                const guerreiroCell = document.createElement('td');
                guerreiroCell.textContent = ADM_CONFIG.GUERREIROS[i-1];
                row.appendChild(guerreiroCell);
                
                // Status
                const statusCell = document.createElement('td');
                const statusBadge = document.createElement('span');
                statusBadge.className = `status-badge ${statusClass}`;
                statusBadge.textContent = status;
                statusCell.appendChild(statusBadge);
                row.appendChild(statusCell);
                
                // Comprador
                const compradorCell = document.createElement('td');
                compradorCell.textContent = comprador;
                row.appendChild(compradorCell);
                
                // Valor
                const valorCell = document.createElement('td');
                valorCell.textContent = valor;
                row.appendChild(valorCell);
                
                // Data
                const dataCell = document.createElement('td');
                dataCell.textContent = data;
                row.appendChild(dataCell);
                
                // A√ß√µes
                const acoesCell = document.createElement('td');
                const acoesDiv = document.createElement('div');
                acoesDiv.className = 'table-actions';
                
                if (admData.numerosSelecionados.includes(i)) {
                    if (!admData.numerosConfirmados.includes(i)) {
                        // Bot√£o confirmar para n√∫meros selecionados mas n√£o confirmados
                        const confirmBtn = document.createElement('button');
                        confirmBtn.className = 'table-btn confirm-btn';
                        confirmBtn.innerHTML = '<i class="fas fa-check"></i>';
                        confirmBtn.title = 'Confirmar pagamento';
                        confirmBtn.onclick = () => confirmarNumero(i);
                        acoesDiv.appendChild(confirmBtn);
                    }
                    
                    // Bot√£o editar para n√∫meros com comprador
                    if (compradorData) {
                        const editBtn = document.createElement('button');
                        editBtn.className = 'table-btn edit-btn';
                        editBtn.innerHTML = '<i class="fas fa-edit"></i>';
                        editBtn.title = 'Editar comprador';
                        editBtn.onclick = () => abrirModalEdicao(i);
                        acoesDiv.appendChild(editBtn);
                    }
                    
                    // Bot√£o cancelar
                    const cancelBtn = document.createElement('button');
                    cancelBtn.className = 'table-btn cancel-btn';
                    cancelBtn.innerHTML = '<i class="fas fa-times"></i>';
                    cancelBtn.title = 'Cancelar sele√ß√£o';
                    cancelBtn.onclick = () => cancelarNumero(i);
                    acoesDiv.appendChild(cancelBtn);
                } else {
                    // Bot√£o for√ßar sele√ß√£o para n√∫meros dispon√≠veis
                    const forceBtn = document.createElement('button');
                    forceBtn.className = 'table-btn confirm-btn';
                    forceBtn.innerHTML = '<i class="fas fa-user-plus"></i>';
                    forceBtn.title = 'For√ßar sele√ß√£o';
                    forceBtn.onclick = () => forcarSelecao(i);
                    acoesDiv.appendChild(forceBtn);
                }
                
                acoesCell.appendChild(acoesDiv);
                row.appendChild(acoesCell);
                
                elements.numbersTable.appendChild(row);
            }
        }
        
        // ==================== FUN√á√ïES DE CONTROLE ====================
        
        // Verificar n√∫mero
        function verificarNumero() {
            const numero = parseInt(elements.controlNumber.value);
            
            if (!numero || numero < 1 || numero > ADM_CONFIG.TOTAL_NUMEROS) {
                showNotification('‚ö†Ô∏è N√öMERO INV√ÅLIDO', 'Digite um n√∫mero entre 1 e 31');
                elements.controlNumber.focus();
                return;
            }
            
            currentSelectedNumber = numero;
            updateNumberInfo();
        }
        
        // Atualizar informa√ß√µes do n√∫mero
        function updateNumberInfo() {
            if (!currentSelectedNumber) {
                elements.numberInfo.style.display = 'none';
                elements.confirmNumberBtn.disabled = true;
                elements.cancelNumberBtn.disabled = true;
                elements.editNumberBtn.disabled = true;
                return;
            }
            
            const numero = currentSelectedNumber;
            const compradorData = admData.compradores[numero];
            
            elements.infoNumber.textContent = numero;
            elements.infoWarrior.textContent = ADM_CONFIG.GUERREIROS[numero-1];
            
            // Determinar status
            let status = 'DISPON√çVEL';
            if (admData.numerosConfirmados.includes(numero)) {
                status = 'CONFIRMADO';
            } else if (admData.numerosPendentes.some(p => p.numero === numero)) {
                status = 'PENDENTE';
            } else if (admData.numerosSelecionados.includes(numero)) {
                status = 'SELECIONADO';
            }
            
            elements.infoStatus.textContent = status;
            elements.infoBuyer.textContent = compradorData?.nome || '-';
            elements.infoDate.textContent = compradorData?.data ? 
                new Date(compradorData.data).toLocaleDateString('pt-BR') : '-';
            
            // Habilitar/desabilitar bot√µes
            const isSelecionado = admData.numerosSelecionados.includes(numero);
            const isConfirmado = admData.numerosConfirmados.includes(numero);
            const isPendente = admData.numerosPendentes.some(p => p.numero === numero);
            
            elements.confirmNumberBtn.disabled = !isSelecionado || isConfirmado;
            elements.cancelNumberBtn.disabled = !isSelecionado;
            elements.editNumberBtn.disabled = !compradorData;
            
            elements.numberInfo.style.display = 'block';
        }
        
        // Confirmar n√∫mero (pagamento recebido)
        function confirmarNumero(numero = currentSelectedNumber) {
            if (!numero) {
                showNotification('‚ö†Ô∏è ERRO', 'Selecione um n√∫mero primeiro');
                return;
            }
            
            if (!admData.numerosSelecionados.includes(numero)) {
                showNotification('‚ö†Ô∏è ERRO', 'Este n√∫mero n√£o est√° selecionado');
                return;
            }
            
            if (admData.numerosConfirmados.includes(numero)) {
                showNotification('‚ö†Ô∏è AVISO', 'Este n√∫mero j√° est√° confirmado');
                return;
            }
            
            // Remover dos pendentes
            admData.numerosPendentes = admData.numerosPendentes.filter(p => p.numero !== numero);
            
            // Adicionar aos confirmados
            admData.numerosConfirmados.push(numero);
            
            // Atualizar dados de comunica√ß√£o
            localStorage.setItem('rifa_com_confirmados', JSON.stringify(admData.numerosConfirmados));
            localStorage.setItem('rifa_com_pendentes', JSON.stringify(admData.numerosPendentes));
            
            // Salvar dados ADM
            saveADMData();
            
            // Disparar evento de confirma√ß√£o
            localStorage.setItem('rifa_ultima_confirmacao', JSON.stringify({
                numero: numero,
                timestamp: Date.now()
            }));
            
            // Atualizar interface
            updateADMInterface();
            
            showNotification('‚úÖ CONFIRMADO', `Pagamento do n√∫mero ${numero} confirmado!`);
        }
        
        // Cancelar n√∫mero
        function cancelarNumero(numero = currentSelectedNumber) {
            if (!numero) {
                showNotification('‚ö†Ô∏è ERRO', 'Selecione um n√∫mero primeiro');
                return;
            }
            
            if (!admData.numerosSelecionados.includes(numero)) {
                showNotification('‚ö†Ô∏è ERRO', 'Este n√∫mero n√£o est√° selecionado');
                return;
            }
            
            if (!confirm(`Tem certeza que deseja cancelar o n√∫mero ${numero}?\nEsta a√ß√£o n√£o pode ser desfeita.`)) {
                return;
            }
            
            // Remover de todas as listas
            admData.numerosSelecionados = admData.numerosSelecionados.filter(n => n !== numero);
            admData.numerosConfirmados = admData.numerosConfirmados.filter(n => n !== numero);
            admData.numerosPendentes = admData.numerosPendentes.filter(p => p.numero !== numero);
            delete admData.compradores[numero];
            
            // Atualizar dados de comunica√ß√£o
            localStorage.setItem('rifa_com_selecionados', JSON.stringify(admData.numerosSelecionados));
            localStorage.setItem('rifa_com_confirmados', JSON.stringify(admData.numerosConfirmados));
            localStorage.setItem('rifa_com_pendentes', JSON.stringify(admData.numerosPendentes));
            
            // Salvar dados ADM
            saveADMData();
            
            // Atualizar interface
            updateADMInterface();
            
            showNotification('‚ùå CANCELADO', `N√∫mero ${numero} cancelado com sucesso`);
        }
        
        // For√ßar sele√ß√£o (ADM seleciona manualmente)
        function forcarSelecao(numero = currentSelectedNumber) {
            if (!numero) {
                showNotification('‚ö†Ô∏è ERRO', 'Selecione um n√∫mero primeiro');
                return;
            }
            
            if (admData.numerosSelecionados.includes(numero)) {
                showNotification('‚ö†Ô∏è AVISO', 'Este n√∫mero j√° est√° selecionado');
                return;
            }
            
            const nomeComprador = prompt(`Digite o nome do comprador para o n√∫mero ${numero}:`);
            if (!nomeComprador || nomeComprador.trim() === '') {
                showNotification('‚ö†Ô∏è CANCELADO', 'Opera√ß√£o cancelada');
                return;
            }
            
            // Adicionar √†s listas
            admData.numerosSelecionados.push(numero);
            admData.numerosConfirmados.push(numero);
            
            // Registrar comprador
            admData.compradores[numero] = {
                nome: nomeComprador.trim(),
                data: new Date().toISOString(),
                origem: 'ADM'
            };
            
            // Atualizar dados de comunica√ß√£o
            localStorage.setItem('rifa_com_selecionados', JSON.stringify(admData.numerosSelecionados));
            localStorage.setItem('rifa_com_confirmados', JSON.stringify(admData.numerosConfirmados));
            
            // Salvar dados ADM
            saveADMData();
            
            // Atualizar interface
            updateADMInterface();
            
            showNotification('‚úÖ SELECIONADO', `N√∫mero ${numero} selecionado para ${nomeComprador}`);
        }
        
        // Confirmar pendente
        function confirmarPendente(numero) {
            confirmarNumero(numero);
        }
        
        // Cancelar pendente
        function cancelarPendente(numero) {
            cancelarNumero(numero);
        }
        
        // ==================== MODAL DE EDI√á√ÉO ====================
        
        // Abrir modal de edi√ß√£o
        function abrirModalEdicao(numero) {
            const compradorData = admData.compradores[numero];
            
            if (!compradorData) {
                showNotification('‚ö†Ô∏è ERRO', 'Nenhum comprador registrado para este n√∫mero');
                return;
            }
            
            elements.modalNumber.value = numero;
            elements.modalWarrior.value = ADM_CONFIG.GUERREIROS[numero-1];
            elements.modalBuyer.value = compradorData.nome || '';
            elements.modalPhone.value = compradorData.telefone || '';
            
            elements.editModal.style.display = 'flex';
            elements.modalBuyer.focus();
        }
        
        // Fechar modal
        function fecharModal() {
            elements.editModal.style.display = 'none';
            elements.modalBuyer.value = '';
            elements.modalPhone.value = '';
        }
        
        // Salvar edi√ß√£o
        function salvarEdicao() {
            const numero = parseInt(elements.modalNumber.value);
            const nome = elements.modalBuyer.value.trim();
            const telefone = elements.modalPhone.value.trim();
            
            if (!nome) {
                showNotification('‚ö†Ô∏è ERRO', 'Digite o nome do comprador');
                elements.modalBuyer.focus();
                return;
            }
            
            // Atualizar dados do comprador
            admData.compradores[numero] = {
                ...admData.compradores[numero],
                nome: nome,
                telefone: telefone,
                atualizado: new Date().toISOString()
            };
            
            // Salvar dados ADM
            saveADMData();
            
            // Atualizar interface
            updateADMInterface();
            
            // Fechar modal
            fecharModal();
            
            showNotification('‚úÖ ATUALIZADO', `Dados do n√∫mero ${numero} atualizados`);
        }
        
        // ==================== RELAT√ìRIOS ====================
        
        // Gerar relat√≥rio
        function gerarRelatorio() {
            if (admData.numerosSelecionados.length === 0) {
                showNotification('üìä SEM DADOS', 'N√£o h√° dados suficientes para gerar relat√≥rio');
                return;
            }
            
            // Criar relat√≥rio em formato de texto
            let relatorio = 'RELAT√ìRIO DA RIFA DO GUERREIRO\n';
            relatorio += '================================\n\n';
            relatorio += `Data: ${new Date().toLocaleDateString('pt-BR')}\n`;
            relatorio += `Hora: ${new Date().toLocaleTimeString('pt-BR')}\n\n`;
            
            // Estat√≠sticas
            const total = ADM_CONFIG.TOTAL_NUMEROS;
            const selecionados = admData.numerosSelecionados.length;
            const confirmados = admData.numerosConfirmados.length;
            const arrecadacao = confirmados * ADM_CONFIG.PRECO_NUMERO;
            const premio = arrecadacao * 0.6;
            
            relatorio += 'ESTAT√çSTICAS:\n';
            relatorio += `Total de n√∫meros: ${total}\n`;
            relatorio += `N√∫meros selecionados: ${selecionados} (${((selecionados/total)*100).toFixed(1)}%)\n`;
            relatorio += `N√∫meros confirmados: ${confirmados}\n`;
            relatorio += `Arrecada√ß√£o total: R$ ${arrecadacao.toFixed(2).replace('.', ',')}\n`;
            relatorio += `Pr√™mio (60%): R$ ${premio.toFixed(2).replace('.', ',')}\n\n`;
            
            // N√∫meros vendidos
            relatorio += 'N√öMEROS VENDIDOS:\n';
            relatorio += '----------------\n';
            
            const numerosVendidos = [...admData.numerosSelecionados].sort((a, b) => a - b);
            numerosVendidos.forEach(num => {
                const comprador = admData.compradores[num];
                relatorio += `${num.toString().padStart(2, '0')} - ${ADM_CONFIG.GUERREIROS[num-1]}: `;
                relatorio += `${comprador?.nome || 'An√¥nimo'} `;
                relatorio += `(${admData.numerosConfirmados.includes(num) ? 'CONFIRMADO' : 'PENDENTE'})\n`;
            });
            
            // Compradores √∫nicos
            const compradoresUnicos = new Set();
            Object.values(admData.compradores).forEach(c => {
                if (c.nome) compradoresUnicos.add(c.nome);
            });
            
            relatorio += `\nTotal de participantes √∫nicos: ${compradoresUnicos.size}\n`;
            
            // Criar blob e download
            const blob = new Blob([relatorio], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `relatorio_rifa_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showNotification('üì• RELAT√ìRIO GERADO', 'Relat√≥rio baixado com sucesso!');
        }
        
        // Exportar dados
        function exportarDados() {
            const dadosCompletos = {
                estatisticas: {
                    totalNumeros: ADM_CONFIG.TOTAL_NUMEROS,
                    numerosSelecionados: admData.numerosSelecionados.length,
                    numerosConfirmados: admData.numerosConfirmados.length,
                    numerosPendentes: admData.numerosPendentes.length,
                    arrecadacao: admData.numerosConfirmados.length * ADM_CONFIG.PRECO_NUMERO,
                    premio: admData.numerosConfirmados.length * ADM_CONFIG.PRECO_NUMERO * 0.6
                },
                numeros: admData.compradores,
                historico: admData.historico,
                timestamp: new Date().toISOString()
            };
            
            const dadosJSON = JSON.stringify(dadosCompletos, null, 2);
            const blob = new Blob([dadosJSON], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `backup_rifa_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showNotification('üíæ BACKUP GERADO', 'Backup dos dados exportado com sucesso!');
        }
        
        // ==================== NOTIFICA√á√ïES ====================
        function showNotification(titulo, mensagem) {
            elements.notificationTitle.textContent = titulo;
            elements.notificationText.textContent = mensagem;
            elements.adminNotification.classList.add('show');
            
            setTimeout(() => {
                elements.adminNotification.classList.remove('show');
            }, 5000);
        }
        
        // ==================== EVENT LISTENERS ====================
        function setupEventListeners() {
            // Verificar n√∫mero
            elements.checkNumberBtn.addEventListener('click', verificarNumero);
            elements.controlNumber.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') verificarNumero();
            });
            
            // Bot√µes de controle
            elements.confirmNumberBtn.addEventListener('click', () => confirmarNumero());
            elements.cancelNumberBtn.addEventListener('click', () => cancelarNumero());
            elements.editNumberBtn.addEventListener('click', () => abrirModalEdicao(currentSelectedNumber));
            elements.forceSelectBtn.addEventListener('click', () => forcarSelecao());
            
            // Atualizar lista
            elements.refreshBtn.addEventListener('click', updateADMInterface);
            
            // Modal
            elements.modalConfirmBtn.addEventListener('click', salvarEdicao);
            elements.modalCancelBtn.addEventListener('click', fecharModal);
            elements.editModal.addEventListener('click', function(e) {
                if (e.target === elements.editModal) {
                    fecharModal();
                }
            });
            
            // Relat√≥rios
            elements.generateReportBtn.addEventListener('click', gerarRelatorio);
            elements.exportBtn.addEventListener('click', exportarDados);
            
            // Atualizar a cada 30 segundos
            setInterval(() => {
                loadADMData();
                updateADMInterface();
            }, 30000);
        }
        
        // ==================== INICIALIZA√á√ÉO ====================
        document.addEventListener('DOMContentLoaded', initADMSystem);
    </script>
</body>
    </html>
