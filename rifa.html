<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rifa do Guerreiro - FuriaDaNoitePlay</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a, #1a1a2e);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        /* BOT√ÉO ADM NO CANTO SUPERIOR DIREITO */
        .admin-access {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .admin-btn {
            background: linear-gradient(135deg, #333, #111);
            color: #ff4444;
            border: 2px solid #ff0000;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-decoration: none;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
        }
        
        .admin-btn:hover {
            background: linear-gradient(135deg, #444, #222);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
            transform: translateY(-2px);
            color: #ff0000;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            position: relative;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
            padding-top: 60px; /* Espa√ßo para o bot√£o ADM */
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo {
            width: 100px;
            height: 100px;
            object-fit: contain;
            border-radius: 50%;
            border: 3px solid #ff0000;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
        }
        
        .title {
            font-size: 2rem;
            color: #ff0000;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: #ff4444;
            margin-bottom: 5px;
            text-shadow: 0 0 5px rgba(255, 68, 68, 0.5);
        }
        
        .price-tag {
            background: linear-gradient(135deg, #8B0000, #B22222);
            color: white;
            display: inline-block;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin: 10px 0;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            font-size: 1.2rem;
        }
        
        .description {
            color: #ccc;
            font-size: 0.95rem;
            max-width: 600px;
            margin: 0 auto 20px;
            text-align: center;
        }
        
        .warriors-title {
            text-align: center;
            font-size: 1.6rem;
            color: #ff0000;
            margin: 25px 0 15px;
            text-shadow: 0 0 8px rgba(255, 0, 0, 0.5);
            text-transform: uppercase;
        }
        
        .warriors-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-bottom: 30px;
        }
        
        .warrior-card {
            background: rgba(20, 20, 20, 0.9);
            border: 2px solid #ff0000;
            border-radius: 8px;
            padding: 12px 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 8px rgba(255, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 90px;
        }
        
        .warrior-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
            background: rgba(40, 0, 0, 0.9);
        }
        
        .warrior-card.selected {
            background: linear-gradient(135deg, #8B0000, #B22222);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.9);
            border-color: #ff4444;
        }
        
        .warrior-card.reserved {
            background: linear-gradient(135deg, #333, #555);
            border-color: #666;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .warrior-card.sold {
            background: linear-gradient(135deg, #006400, #228B22);
            border-color: #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }
        
        .warrior-card.pending {
            background: linear-gradient(135deg, #8B4500, #FF8C00);
            border-color: #ffa500;
            box-shadow: 0 0 10px rgba(255, 165, 0, 0.5);
        }
        
        .warrior-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            margin-bottom: 5px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        
        .warrior-label {
            font-size: 0.85rem;
            color: #ff9999;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .warrior-name {
            font-size: 0.75rem;
            color: #ccc;
            margin-top: 5px;
            height: 20px;
            overflow: hidden;
        }
        
        .selection-info {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid #ff0000;
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 25px;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
        }
        
        .selection-info h3 {
            color: #ff4444;
            margin-bottom: 12px;
            text-align: center;
            font-size: 1.3rem;
        }
        
        .selected-numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-bottom: 15px;
            min-height: 40px;
        }
        
        .selected-number {
            background: linear-gradient(135deg, #8B0000, #B22222);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 0 8px rgba(255, 0, 0, 0.5);
        }
        
        .total-price {
            text-align: center;
            font-size: 1.3rem;
            color: #ff4444;
            margin: 15px 0;
            font-weight: bold;
        }
        
        .payment-info {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #ff4444;
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(255, 68, 68, 0.3);
        }
        
        .payment-info h4 {
            color: #ff4444;
            margin-bottom: 12px;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .pix-key {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            border: 1px dashed #ff4444;
            font-family: monospace;
            font-size: 1.1rem;
            color: #ff9999;
            word-break: break-all;
        }
        
        .whatsapp-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            padding: 16px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            text-decoration: none;
            margin: 20px auto;
            max-width: 300px;
            box-shadow: 0 0 15px rgba(37, 211, 102, 0.5);
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .whatsapp-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 20px rgba(37, 211, 102, 0.7);
            background: linear-gradient(135deg, #20b858, #0f7a5f);
        }
        
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .btn {
            padding: 16px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
        }
        
        .select-btn {
            background: linear-gradient(135deg, #ff0000, #ff4444);
            color: white;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }
        
        .select-btn:hover {
            background: linear-gradient(135deg, #cc0000, #ff2222);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
            transform: translateY(-3px);
        }
        
        .reset-btn {
            background: linear-gradient(135deg, #333, #555);
            color: white;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.1);
        }
        
        .reset-btn:hover {
            background: linear-gradient(135deg, #444, #666);
            box-shadow: 0 0 12px rgba(255, 255, 255, 0.2);
        }
        
        .back-btn {
            background: linear-gradient(135deg, #222, #444);
            color: #ff4444;
            border: 2px solid #ff0000;
            box-shadow: 0 0 8px rgba(255, 0, 0, 0.3);
        }
        
        .back-btn:hover {
            background: linear-gradient(135deg, #333, #555);
            box-shadow: 0 0 12px rgba(255, 0, 0, 0.5);
        }
        
        .prize-info {
            background: rgba(20, 20, 20, 0.8);
            border-left: 4px solid #ff0000;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .prize-info h4 {
            color: #ff4444;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .prize-breakdown {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .prize-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }
        
        .prize-total {
            font-weight: bold;
            color: #ff4444;
            font-size: 1.1rem;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #444;
            text-align: center;
        }
        
        .instructions {
            background: rgba(20, 20, 20, 0.7);
            border-left: 4px solid #ff4444;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
        }
        
        .instructions h4 {
            color: #ff4444;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .instructions ul {
            padding-left: 20px;
            color: #ccc;
        }
        
        .instructions li {
            margin-bottom: 8px;
            line-height: 1.4;
            font-size: 0.9rem;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #333;
            color: #888;
            font-size: 0.85rem;
            line-height: 1.5;
        }
        
        .social-mention {
            color: #ff9999;
            font-style: italic;
            margin: 10px 0;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .warriors-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }
            
            .title {
                font-size: 1.7rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
            }
            
            .warrior-card {
                min-height: 85px;
                padding: 10px 5px;
            }
            
            .warrior-number {
                font-size: 1.6rem;
            }
            
            .pix-key {
                font-size: 1rem;
            }
            
            .admin-access {
                top: 10px;
                right: 10px;
            }
            
            .admin-btn {
                padding: 10px 15px;
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 480px) {
            .warriors-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .title {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 14px;
                font-size: 0.95rem;
            }
            
            .whatsapp-btn {
                padding: 14px;
                font-size: 1rem;
            }
        }
        
        @media (max-width: 360px) {
            .warriors-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- BOT√ÉO ADM FIXO NO CANTO SUPERIOR DIREITO -->
    <div class="admin-access">
        <a href="ADM.html" class="admin-btn">
            <i class="fas fa-user-shield"></i> ACESSO ADM
        </a>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <img src="f√∫ria.png" alt="FuriaDaNoitePlay" class="logo">
            </div>
            <h1 class="title">RIFA DO GUERREIRO</h1>
            <h2 class="subtitle">FuriaDaNoitePlay</h2>
            <div class="price-tag">Valor: R$ 3,00 por n√∫mero</div>
            <p class="description">Rifa exclusiva para a comunidade de Mobile Legends: Bang Bang (MLBB)</p>
        </div>
        
        <h2 class="warriors-title">Tabela dos Guerreiros</h2>
        
        <div class="warriors-grid" id="warriorsGrid">
            <!-- Os n√∫meros de 1 a 31 ser√£o gerados por JavaScript -->
        </div>
        
        <div class="selection-info">
            <h3>Seus Guerreiros Selecionados</h3>
            <div class="selected-numbers" id="selectedNumbers">
                <p style="color: #888; text-align: center; width: 100%;">Nenhum guerreiro selecionado ainda</p>
            </div>
            
            <div class="total-price" id="totalPrice">Total: R$ 0,00</div>
            
            <div class="action-buttons">
                <button class="btn select-btn" id="confirmSelection">CONFIRMAR SELE√á√ÉO</button>
                <button class="btn reset-btn" id="resetSelection">LIMPAR SELE√á√ÉO</button>
                <a href="index.html" class="btn back-btn">VOLTAR PARA MANUTEN√á√ÉO</a>
            </div>
        </div>
        
        <div class="payment-info">
            <h4>Pagamento via PIX</h4>
            <p>Envie o valor para a chave PIX abaixo e envie o comprovante pelo WhatsApp:</p>
            
            <div class="pix-key">
                furiadanoiteplay2025@gmail.com
            </div>
            
            <p><strong>Telefone para envio do comprovante:</strong> +55 (31) 97319-008</p>
            <p><strong>Envie junto:</strong> Seu nome e os n√∫meros escolhidos</p>
            
            <div id="whatsappBtnContainer">
                <!-- Bot√£o do WhatsApp ser√° gerado dinamicamente -->
            </div>
        </div>
        
        <div class="prize-info">
            <h4>Premia√ß√£o</h4>
            <p>O ganhador receber√°:</p>
            
            <div class="prize-breakdown">
                <div class="prize-item">
                    <span>60% da arrecada√ß√£o da rifa</span>
                    <span>R$ ???</span>
                </div>
                <div class="prize-item">
                    <span>Parte dos colaboradores e patrocinadores</span>
                    <span>R$ ???</span>
                </div>
            </div>
            
            <div class="prize-total">Pr√™mio Total: A ser divulgado ap√≥s sorteio</div>
            <p class="social-mention">O pr√™mio total ser√° divulgado no Instagram e WhatsApp ap√≥s o sorteio!</p>
        </div>
        
        <div class="instructions">
            <h4>Como Participar:</h4>
            <ul>
                <li>Selecione at√© 5 n√∫meros de guerreiros (1 a 31)</li>
                <li>Cada n√∫mero custa R$ 3,00 (exclusivo para comunidade MLBB)</li>
                <li>Clique em "CONFIRMAR SELE√á√ÉO"</li>
                <li>Ser√° aberto o WhatsApp automaticamente com os n√∫meros selecionados</li>
                <li>Fa√ßa o PIX para: <strong>furiadanoiteplay2025@gmail.com</strong></li>
                <li>Envie o comprovante pelo WhatsApp com a mensagem gerada</li>
                <li>Ap√≥s confirma√ß√£o do pagamento, seus n√∫meros ser√£o reservados</li>
                <li>Sorteio ser√° realizado quando todos os n√∫meros forem vendidos</li>
            </ul>
        </div>
        
        <div class="footer">
            <p>FuriaDaNoitePlay &copy; 2024 - Rifa exclusiva para a comunidade MLBB</p>
            <p>O resultado ser√° divulgado no Instagram, WhatsApp e grupos da comunidade</p>
            <p>D√∫vidas? Entre em contato pelo WhatsApp: +55 (31) 97319-008</p>
        </div>
    </div>

    <script>
        // ==================== SISTEMA DA RIFA ====================
        
        // Gerar os n√∫meros de 1 a 31
        const warriorsGrid = document.getElementById('warriorsGrid');
        const selectedNumbersContainer = document.getElementById('selectedNumbers');
        const totalPriceElement = document.getElementById('totalPrice');
        const confirmBtn = document.getElementById('confirmSelection');
        const resetBtn = document.getElementById('resetSelection');
        const whatsappBtnContainer = document.getElementById('whatsappBtnContainer');
        
        let selectedNumbers = [];
        const maxSelection = 5;
        const pricePerNumber = 3.00;
        
        // Nomes fict√≠cios para os guerreiros (tema MLBB)
        const warriorNames = [
            "Alucard", "Miya", "Zilong", "Layla", "Chou", "Gusion", "Harley", "Lancelot", "Fanny", "Kagura",
            "Hayabusa", "Claude", "Karrie", "Granger", "Bruno", "Wanwan", "Clint", "Lesley", "Beatrix", "Brody",
            "Esmeralda", "Lunox", "Harith", "Cecilion", "Pharsa", "Odette", "Yve", "Valentina", "Xavier", "Lylia",
            "Benedetta"
        ];
        
        // ==================== INICIALIZA√á√ÉO ====================
        
        // Criar os cart√µes de 1 a 31
        function criarCartoesGuerreiros() {
            warriorsGrid.innerHTML = '';
            
            for (let i = 1; i <= 31; i++) {
                const warriorCard = document.createElement('div');
                warriorCard.className = 'warrior-card';
                warriorCard.dataset.number = i;
                warriorCard.dataset.name = warriorNames[i-1];
                
                const warriorNumber = document.createElement('div');
                warriorNumber.className = 'warrior-number';
                warriorNumber.textContent = i;
                
                const warriorLabel = document.createElement('div');
                warriorLabel.className = 'warrior-label';
                warriorLabel.textContent = 'GUERREIRO';
                
                const warriorName = document.createElement('div');
                warriorName.className = 'warrior-name';
                warriorName.textContent = warriorNames[i-1];
                
                warriorCard.appendChild(warriorNumber);
                warriorCard.appendChild(warriorLabel);
                warriorCard.appendChild(warriorName);
                
                warriorCard.addEventListener('click', () => toggleNumberSelection(i, warriorNames[i-1], warriorCard));
                
                warriorsGrid.appendChild(warriorCard);
            }
            
            // Verificar status dos n√∫meros
            verificarStatusNumeros();
        }
        
        // Alternar sele√ß√£o de n√∫mero
        function toggleNumberSelection(number, name, cardElement) {
            if (cardElement.classList.contains('reserved') || 
                cardElement.classList.contains('sold') || 
                cardElement.classList.contains('pending')) {
                return;
            }
            
            const index = selectedNumbers.findIndex(item => item.number === number);
            
            if (index > -1) {
                // Remover sele√ß√£o
                selectedNumbers.splice(index, 1);
                cardElement.classList.remove('selected');
            } else {
                // Adicionar sele√ß√£o (se n√£o atingiu o limite)
                if (selectedNumbers.length < maxSelection) {
                    selectedNumbers.push({number: number, name: name});
                    cardElement.classList.add('selected');
                } else {
                    alert(`Voc√™ s√≥ pode selecionar no m√°ximo ${maxSelection} n√∫meros!`);
                    return;
                }
            }
            
            updateSelectedNumbersDisplay();
            updateTotalPrice();
            updateWhatsAppButton();
        }
        
        // Atualizar display dos n√∫meros selecionados
        function updateSelectedNumbersDisplay() {
            selectedNumbersContainer.innerHTML = '';
            
            if (selectedNumbers.length === 0) {
                selectedNumbersContainer.innerHTML = '<p style="color: #888; text-align: center; width: 100%;">Nenhum guerreiro selecionado ainda</p>';
                return;
            }
            
            // Ordenar por n√∫mero
            selectedNumbers.sort((a, b) => a.number - b.number);
            
            selectedNumbers.forEach(item => {
                const numberElement = document.createElement('div');
                numberElement.className = 'selected-number';
                numberElement.textContent = item.number;
                selectedNumbersContainer.appendChild(numberElement);
            });
        }
        
        // Atualizar pre√ßo total
        function updateTotalPrice() {
            const total = selectedNumbers.length * pricePerNumber;
            totalPriceElement.textContent = `Total: R$ ${total.toFixed(2).replace('.', ',')}`;
        }
        
        // Atualizar bot√£o do WhatsApp
        function updateWhatsAppButton() {
            whatsappBtnContainer.innerHTML = '';
            
            if (selectedNumbers.length === 0) {
                // Bot√£o padr√£o quando n√£o h√° sele√ß√£o
                const defaultBtn = document.createElement('a');
                defaultBtn.href = `https://wa.me/553197319008?text=${encodeURIComponent('Ol√°! Gostaria de participar da Rifa do Guerreiro.')}`;
                defaultBtn.className = 'whatsapp-btn';
                defaultBtn.target = '_blank';
                defaultBtn.innerHTML = '<i class="fab fa-whatsapp"></i> Enviar Comprovante no WhatsApp';
                whatsappBtnContainer.appendChild(defaultBtn);
                return;
            }
            
            // Ordenar por n√∫mero
            selectedNumbers.sort((a, b) => a.number - b.number);
            
            // Criar mensagem detalhada para WhatsApp
            const total = selectedNumbers.length * pricePerNumber;
            
            const message = `üì± *CONFIRMA√á√ÉO DE SELE√á√ÉO - RIFA DO GUERREIRO* üì±

‚úÖ *N√öMEROS SELECIONADOS:*
${selectedNumbers.map(item => `‚û§ ${item.number} - ${item.name}`).join('\n')}

üí∞ *VALOR TOTAL:* R$ ${total.toFixed(2).replace('.', ',')}
üìß *CHAVE PIX:* furiadanoiteplay2025@gmail.com

üë§ *MEU NOME:* [DIGITE SEU NOME AQUI]

üìã *INSTRU√á√ïES:*
1Ô∏è‚É£ Vou fazer o PIX agora mesmo
2Ô∏è‚É£ Envio o comprovante nesta conversa
3Ô∏è‚É£ Aguardo a confirma√ß√£o dos meus n√∫meros

üéÆ *FuriaDaNoitePlay - Comunidade MLBB* üéÆ`;
            
            const whatsappBtn = document.createElement('a');
            whatsappBtn.href = `https://wa.me/553197319008?text=${encodeURIComponent(message)}`;
            whatsappBtn.className = 'whatsapp-btn';
            whatsappBtn.target = '_blank';
            whatsappBtn.innerHTML = '<i class="fab fa-whatsapp"></i> ENVIAR COMPROVANTE NO WHATSAPP';
            whatsappBtn.id = 'dynamicWhatsAppBtn';
            
            whatsappBtnContainer.appendChild(whatsappBtn);
        }
        
        // ==================== SISTEMA DE COMUNICA√á√ÉO ====================
        
        // Verificar status dos n√∫meros ao carregar a p√°gina
        function verificarStatusNumeros() {
            const numerosSelecionados = JSON.parse(
                localStorage.getItem('rifa_com_selecionados') || '[]'
            );
            
            const numerosConfirmados = JSON.parse(
                localStorage.getItem('rifa_com_confirmados') || '[]'
            );
            
            const numerosPendentes = JSON.parse(
                localStorage.getItem('rifa_com_pendentes') || '[]'
            );
            
            // Para cada n√∫mero de 1 a 31
            for (let i = 1; i <= 31; i++) {
                const card = document.querySelector(`.warrior-card[data-number="${i}"]`);
                if (!card) continue;
                
                if (numerosConfirmados.includes(i)) {
                    // N√∫mero confirmado (vendido)
                    card.classList.add('sold');
                    card.querySelector('.warrior-number').textContent = '‚úì';
                    card.querySelector('.warrior-number').style.color = '#00ff00';
                    card.querySelector('.warrior-label').textContent = 'VENDIDO';
                    card.querySelector('.warrior-label').style.color = '#00ff00';
                    card.style.cursor = 'not-allowed';
                    card.title = 'Este n√∫mero j√° foi vendido e confirmado';
                } else if (numerosPendentes.some(p => p.numero === i)) {
                    // N√∫mero selecionado (pendente)
                    card.classList.add('pending');
                    card.querySelector('.warrior-number').textContent = '‚è≥';
                    card.querySelector('.warrior-number').style.color = '#ffa500';
                    card.querySelector('.warrior-label').textContent = 'PENDENTE';
                    card.querySelector('.warrior-label').style.color = '#ffa500';
                    card.style.cursor = 'not-allowed';
                    card.title = 'Este n√∫mero est√° aguardando confirma√ß√£o de pagamento';
                }
            }
        }
        
        // Comunicar sele√ß√£o para o sistema
        function comunicarSelecaoParaSistema() {
            if (selectedNumbers.length === 0) {
                alert('Por favor, selecione pelo menos um n√∫mero para participar!');
                return false;
            }
            
            try {
                // Verificar se algum n√∫mero j√° est√° reservado
                const numerosSelecionados = JSON.parse(
                    localStorage.getItem('rifa_com_selecionados') || '[]'
                );
                
                const numerosConfirmados = JSON.parse(
                    localStorage.getItem('rifa_com_confirmados') || '[]'
                );
                
                const numerosPendentes = JSON.parse(
                    localStorage.getItem('rifa_com_pendentes') || '[]'
                );
                
                // Verificar cada n√∫mero selecionado
                for (const item of selectedNumbers) {
                    const numero = item.number;
                    
                    if (numerosSelecionados.includes(numero) || 
                        numerosConfirmados.includes(numero) ||
                        numerosPendentes.some(p => p.numero === numero)) {
                        
                        alert(`‚ö†Ô∏è O n√∫mero ${numero} j√° foi selecionado por outra pessoa!\n\nPor favor, escolha outro n√∫mero.`);
                        
                        // Remover n√∫mero indispon√≠vel da sele√ß√£o
                        selectedNumbers = selectedNumbers.filter(n => n.number !== numero);
                        
                        // Atualizar interface
                        updateSelectedNumbersDisplay();
                        updateTotalPrice();
                        updateWhatsAppButton();
                        
                        // Remover sele√ß√£o visual do cart√£o
                        const card = document.querySelector(`.warrior-card[data-number="${numero}"]`);
                        if (card) {
                            card.classList.remove('selected');
                        }
                        
                        return false;
                    }
                }
                
                // Obter nome do usu√°rio
                const nomeUsuario = prompt('Por favor, digite seu nome para confirmar a sele√ß√£o:');
                if (!nomeUsuario || nomeUsuario.trim() === '') {
                    alert('‚ùå √â necess√°rio informar seu nome para confirmar a sele√ß√£o.');
                    return false;
                }
                
                // Para cada n√∫mero selecionado
                const numerosParaComunicar = [];
                selectedNumbers.forEach(item => {
                    const numero = item.number;
                    
                    // Adicionar √† lista de selecionados
                    numerosSelecionados.push(numero);
                    
                    // Adicionar √† lista de pendentes
                    numerosPendentes.push({
                        numero: numero,
                        usuario: nomeUsuario.trim(),
                        timestamp: Date.now(),
                        data: new Date().toISOString(),
                        telefone: ''
                    });
                    
                    numerosParaComunicar.push(numero);
                });
                
                // Salvar no localStorage
                localStorage.setItem('rifa_com_selecionados', JSON.stringify(numerosSelecionados));
                localStorage.setItem('rifa_com_pendentes', JSON.stringify(numerosPendentes));
                
                // Salvar como √∫ltima sele√ß√£o (para notifica√ß√£o)
                const ultimaSelecao = {
                    numeros: selectedNumbers.map(item => item.number),
                    usuario: nomeUsuario.trim(),
                    timestamp: Date.now(),
                    total: selectedNumbers.length * pricePerNumber
                };
                
                localStorage.setItem('rifa_com_ultimo', JSON.stringify(ultimaSelecao));
                
                // Marcar n√∫meros como pendentes na interface
                marcarNumerosComoPendentes();
                
                console.log('‚úÖ Sele√ß√£o comunicada ao sistema:', ultimaSelecao);
                return true;
                
            } catch (error) {
                console.error('‚ùå Erro ao comunicar sele√ß√£o:', error);
                alert('‚ùå Erro ao processar sua sele√ß√£o. Por favor, tente novamente.');
                return false;
            }
        }
        
        // Marcar n√∫meros como pendentes na interface
        function marcarNumerosComoPendentes() {
            selectedNumbers.forEach(item => {
                const card = document.querySelector(`.warrior-card[data-number="${item.number}"]`);
                if (card) {
                    card.classList.remove('selected');
                    card.classList.add('pending');
                    card.querySelector('.warrior-number').textContent = '‚è≥';
                    card.querySelector('.warrior-number').style.color = '#ffa500';
                    card.querySelector('.warrior-label').textContent = 'PENDENTE';
                    card.querySelector('.warrior-label').style.color = '#ffa500';
                }
            });
            
            // Limpar sele√ß√£o
            selectedNumbers = [];
            updateSelectedNumbersDisplay();
            updateTotalPrice();
            updateWhatsAppButton();
        }
        
        // Configurar bot√£o de confirma√ß√£o
        function configurarBotaoConfirmacao() {
            confirmBtn.onclick = function() {
                if (selectedNumbers.length === 0) {
                    alert('Por favor, selecione pelo menos um n√∫mero para participar!');
                    return;
                }
                
                // Comunicar sele√ß√£o para o sistema
                const comunicado = comunicarSelecaoParaSistema();
                if (!comunicado) {
                    return;
                }
                
                // Ordenar por n√∫mero
                selectedNumbers.sort((a, b) => a.number - b.number);
                
                // Criar mensagem detalhada para WhatsApp
                const total = selectedNumbers.length * pricePerNumber;
                
                const message = `üì± *CONFIRMA√á√ÉO DE SELE√á√ÉO - RIFA DO GUERREIRO* üì±

‚úÖ *N√öMEROS SELECIONADOS:*
${selectedNumbers.map(item => `‚û§ ${item.number} - ${item.name}`).join('\n')}

üí∞ *VALOR TOTAL:* R$ ${total.toFixed(2).replace('.', ',')}
üìß *CHAVE PIX:* furiadanoiteplay2025@gmail.com

üë§ *MEU NOME:* [DIGITE SEU NOME AQUI]

üìã *INSTRU√á√ïES:*
1Ô∏è‚É£ Vou fazer o PIX agora mesmo
2Ô∏è‚É£ Envio o comprovante nesta conversa
3Ô∏è‚É£ Aguardo a confirma√ß√£o dos meus n√∫meros

üéÆ *FuriaDaNoitePlay - Comunidade MLBB* üéÆ`;
                
                // Abrir WhatsApp automaticamente
                window.open(`https://wa.me/553197319008?text=${encodeURIComponent(message)}`, '_blank');
                
                // Mostrar confirma√ß√£o
                const numerosList = selectedNumbers.map(item => `${item.number} (${item.name})`).join(', ');
                alert(`‚úÖ Sele√ß√£o confirmada e comunicada ao sistema!\n\nüìä N√∫meros reservados: ${numerosList}\nüí∞ Total: R$ ${total.toFixed(2)}\n\nüì± O WhatsApp foi aberto automaticamente!\n\n‚ö†Ô∏è Lembre-se de:\n1. Fazer o PIX para: furiadanoiteplay2025@gmail.com\n2. Enviar o comprovante pelo WhatsApp\n3. Colocar seu nome na mensagem\n\nüéÆ Boa sorte!`);
            };
        }
        
        // Configurar prote√ß√£o do bot√£o ADM
        function configurarProtecaoADM() {
            document.querySelector('.admin-btn').addEventListener('click', function(e) {
                // Verificar se j√° est√° logado
                const adminLoggedIn = localStorage.getItem('adminLoggedIn');
                const loginTime = localStorage.getItem('adminLoginTime');
                
                if (adminLoggedIn && loginTime) {
                    // Verificar tempo da sess√£o (8 horas)
                    const sessionTime = 8 * 60 * 60 * 1000;
                    const now = Date.now();
                    
                    if (now - parseInt(loginTime) <= sessionTime) {
                        // Sess√£o v√°lida, permitir acesso
                        return true;
                    } else {
                        // Sess√£o expirada
                        localStorage.removeItem('adminLoggedIn');
                        localStorage.removeItem('adminLoginTime');
                    }
                }
                
                // Solicitar senha
                const password = prompt('üîê DIGITE A SENHA DE ACESSO AO PAINEL ADM:');
                if (password !== 'FuriaMLBB2024!') {
                    e.preventDefault();
                    alert('‚ùå SENHA INCORRETA! ACESSO NEGADO.');
                } else {
                    // Salvar login
                    localStorage.setItem('adminLoggedIn', 'true');
                    localStorage.setItem('adminLoginTime', Date.now().toString());
                }
            });
        }
        
        // Configurar ouvinte para atualiza√ß√µes do sistema
        function configurarOuvinteAtualizacoes() {
            window.addEventListener('storage', function(event) {
                if (event.key === 'rifa_com_confirmados' || 
                    event.key === 'rifa_com_selecionados' || 
                    event.key === 'rifa_com_pendentes') {
                    
                    console.log('üîÑ Atualizando status dos n√∫meros...');
                    verificarStatusNumeros();
                    
                    // Verificar se n√∫meros selecionados foram reservados
                    const numerosAtualizados = JSON.parse(event.newValue || '[]');
                    const numerosAntigos = JSON.parse(event.oldValue || '[]');
                    
                    // Verificar se algum n√∫mero selecionado foi reservado
                    selectedNumbers = selectedNumbers.filter(item => {
                        if (numerosAtualizados.includes(item.number) && !numerosAntigos.includes(item.number)) {
                            // N√∫mero foi reservado, remover da sele√ß√£o
                            const card = document.querySelector(`.warrior-card[data-number="${item.number}"]`);
                            if (card) {
                                card.classList.remove('selected');
                            }
                            return false;
                        }
                        return true;
                    });
                    
                    // Atualizar interface
                    updateSelectedNumbersDisplay();
                    updateTotalPrice();
                    updateWhatsAppButton();
                }
            });
        }
        
        // ==================== INICIALIZA√á√ÉO ====================
        
        function inicializarSistema() {
            console.log('üéÆ Inicializando sistema da Rifa do Guerreiro...');
            
            // Criar cart√µes dos guerreiros
            criarCartoesGuerreiros();
            
            // Inicializar dados de comunica√ß√£o se n√£o existirem
            if (!localStorage.getItem('rifa_com_selecionados')) {
                localStorage.setItem('rifa_com_selecionados', JSON.stringify([]));
                localStorage.setItem('rifa_com_confirmados', JSON.stringify([]));
                localStorage.setItem('rifa_com_pendentes', JSON.stringify([]));
                console.log('üìÅ Dados de comunica√ß√£o inicializados');
            }
            
            // Configurar bot√µes
            configurarBotaoConfirmacao();
            configurarProtecaoADM();
            configurarOuvinteAtualizacoes();
            
            // Bot√£o de limpar sele√ß√£o
            resetBtn.addEventListener('click', () => {
                selectedNumbers = [];
                
                // Remover classe 'selected' de todos os cart√µes
                document.querySelectorAll('.warrior-card').forEach(card => {
                    if (!card.classList.contains('reserved') && 
                        !card.classList.contains('sold') && 
                        !card.classList.contains('pending')) {
                        card.classList.remove('selected');
                    }
                });
                
                updateSelectedNumbersDisplay();
                updateTotalPrice();
                updateWhatsAppButton();
            });
            
            // Inicializar display
            updateSelectedNumbersDisplay();
            updateTotalPrice();
            updateWhatsAppButton();
            
            console.log('‚úÖ Sistema da Rifa do Guerreiro inicializado!');
        }
        
        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            inicializarSistema();
            
            // Adicionar Font Awesome para o √≠cone do WhatsApp e ADM
            const fontAwesomeScript = document.createElement('script');
            fontAwesomeScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js';
            document.head.appendChild(fontAwesomeScript);
        });
    </script>
</body>
    </html>
