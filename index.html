<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FuriaDaNoitePlay - Chat com Discord</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ESTILOS GERAIS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a051e 0%, #1a0b3a 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* HEADER */
        .header {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 40px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 20px;
            border: 2px solid rgba(255, 107, 53, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 107, 53, 0.1) 0%, transparent 70%);
            animation: pulse 4s infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0.3; }
            100% { transform: scale(1.2); opacity: 0.1; }
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .logo-img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #FF6B35;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
        }
        
        .logo-text {
            font-size: 3.5rem;
            background: linear-gradient(45deg, #FF6B35, #FF8C42, #FFA726);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 107, 53, 0.3);
            font-weight: 900;
            letter-spacing: 2px;
        }
        
        .status {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 25px;
            background: rgba(255, 0, 0, 0.2);
            border-radius: 50px;
            border: 2px solid rgba(255, 0, 0, 0.3);
            font-weight: bold;
            margin-top: 10px;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff4444;
            animation: blink 1.5s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        /* CHAT SECTION */
        .chat-section {
            background: rgba(10, 5, 30, 0.9);
            border-radius: 20px;
            border: 2px solid #FF6B35;
            box-shadow: 
                0 0 40px rgba(255, 107, 53, 0.4),
                inset 0 0 40px rgba(255, 107, 53, 0.1);
            overflow: hidden;
            margin-bottom: 40px;
        }
        
        .chat-header {
            padding: 25px;
            background: linear-gradient(90deg, rgba(255, 107, 53, 0.2), rgba(255, 140, 66, 0.1));
            border-bottom: 2px solid #FF6B35;
            text-align: center;
        }
        
        .chat-title {
            font-size: 2.2rem;
            color: #FF8C42;
            text-shadow: 
                0 0 10px rgba(255, 107, 53, 0.5),
                0 0 20px rgba(255, 107, 53, 0.3);
            margin-bottom: 10px;
            font-weight: 900;
        }
        
        .chat-subtitle {
            color: #aaa;
            font-size: 1.1rem;
        }
        
        /* STATUS CONEX√ÉO */
        .connection-status {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(255, 107, 53, 0.3);
            font-size: 0.9rem;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ff4444;
        }
        
        .status-indicator.connected {
            background: #44ff44;
            box-shadow: 0 0 10px #44ff44;
        }
        
        /* MENSAGENS */
        .messages-container {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(5, 2, 15, 0.8);
        }
        
        .message {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(255, 107, 53, 0.1);
            border-left: 4px solid #FF6B35;
            border-radius: 0 10px 10px 0;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .message.discord {
            background: rgba(88, 101, 242, 0.1);
            border-left-color: #5865F2;
        }
        
        .message.system {
            background: rgba(255, 193, 7, 0.1);
            border-left-color: #FFC107;
            text-align: center;
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .message-user {
            color: #FF8C42;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .message.discord .message-user {
            color: #7289da;
        }
        
        .message.system .message-user {
            color: #FFC107;
        }
        
        .message-time {
            color: #888;
            font-size: 0.85rem;
        }
        
        .message-content {
            color: #eee;
            line-height: 1.5;
            word-break: break-word;
        }
        
        .message-content a {
            color: #FFCC80;
            text-decoration: none;
            border-bottom: 1px dotted #FFCC80;
        }
        
        .message-content a:hover {
            color: #FFE0B2;
            border-bottom: 1px solid #FFE0B2;
        }
        
        /* INPUT AREA */
        .input-container {
            padding: 20px;
            background: rgba(20, 10, 40, 0.95);
            border-top: 2px solid #FF6B35;
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .nick-input {
            width: 180px;
            padding: 14px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #FF6B35;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .nick-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .message-input {
            flex: 1;
            padding: 14px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #FF6B35;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .message-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .send-button {
            padding: 14px 30px;
            background: linear-gradient(45deg, #FF6B35, #FF8C42);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .send-button:hover {
            background: linear-gradient(45deg, #FF8C42, #FFA726);
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
            transform: translateY(-2px);
        }
        
        .send-button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* SCROLLBAR */
        .messages-container::-webkit-scrollbar {
            width: 10px;
        }
        
        .messages-container::-webkit-scrollbar-track {
            background: rgba(255, 107, 53, 0.1);
            border-radius: 5px;
        }
        
        .messages-container::-webkit-scrollbar-thumb {
            background: #FF6B35;
            border-radius: 5px;
        }
        
        .messages-container::-webkit-scrollbar-thumb:hover {
            background: #FF8C42;
        }
        
        /* NOTIFICATION */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #FF6B35, #FF8C42);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.4);
            animation: slideInRight 0.3s ease-out;
            max-width: 350px;
            font-weight: 500;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        /* FOOTER */
        .footer {
            text-align: center;
            padding: 30px;
            color: #888;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 107, 53, 0.2);
            margin-top: 40px;
        }
        
        /* RESPONSIVO */
        @media (max-width: 768px) {
            .logo-text {
                font-size: 2.5rem;
            }
            
            .chat-title {
                font-size: 1.8rem;
            }
            
            .messages-container {
                height: 400px;
            }
            
            .input-container {
                flex-direction: column;
            }
            
            .nick-input, .message-input, .send-button {
                width: 100%;
            }
            
            .connection-status {
                position: relative;
                top: 0;
                right: 0;
                margin-top: 15px;
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .logo-text {
                font-size: 2rem;
            }
            
            .chat-title {
                font-size: 1.5rem;
            }
            
            .header {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <div class="header">
            <div class="logo">
                <img src="https://via.placeholder.com/80/FF6B35/ffffff?text=FDP" alt="Logo" class="logo-img">
                <div class="logo-text">FuriaDaNoitePlayüåïFR0Nüåï</div>
            </div>
            <div class="status">
                <span class="status-dot"></span>
                <span>SISTEMA EM MANUTEN√á√ÉO</span>
            </div>
        </div>

        <!-- CHAT SECTION -->
        <div class="chat-section">
            <div class="chat-header">
                <h1 class="chat-title">üåå Chat Gal√°tico Discord</h1>
                <p class="chat-subtitle">Conectado em tempo real ‚Ä¢ Mensagens sincronizadas</p>
                
                <div class="connection-status" id="connectionStatus">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span id="statusText">Conectando ao servidor...</span>
                </div>
            </div>
            
            <!-- MENSAGENS -->
            <div class="messages-container" id="messagesContainer">
                <div class="message system">
                    <div class="message-header">
                        <span class="message-user"><i class="fas fa-robot"></i> Sistema</span>
                        <span class="message-time" id="welcomeTime"></span>
                    </div>
                    <div class="message-content">
                        üöÄ Bem-vindo ao <strong>Chat Gal√°tico FuriaDaNoitePlayüåïFR0Nüåï</strong><br>
                        üì° Conectando ao Discord... Suas mensagens aparecer√£o aqui!
                    </div>
                </div>
            </div>
            
            <!-- INPUT AREA -->
            <div class="input-container">
                <input type="text" 
                       id="nickInput" 
                       class="nick-input" 
                       placeholder="Seu nick"
                       maxlength="20"
                       autocomplete="off">
                <input type="text" 
                       id="messageInput" 
                       class="message-input" 
                       placeholder="Digite sua mensagem (vai para o Discord)..."
                       maxlength="500"
                       autocomplete="off">
                <button id="sendButton" class="send-button">
                    <i class="fas fa-paper-plane"></i>
                    Enviar
                </button>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <p>¬© 2024 FuriaDaNoitePlayüåïFR0Nüåï ‚Ä¢ Todos os direitos reservados</p>
            <p style="margin-top: 10px; font-size: 0.8rem; color: #666;">
                <i class="fas fa-headset"></i> Suporte: suporte@furiadanoiteplay.com.br
            </p>
        </div>
    </div>

    <!-- SCRIPT PRINCIPAL -->
    <script>
        // ================= CONFIGURA√á√ÉO =================
        // ‚ö†Ô∏è IMPORTANTE: TROQUE ESTA URL PELA DO SEU REPLIT!
        const WS_SERVER_URL = 'wss://furia-chat-bot.seuUsuario.replit.app';
        
        // IDs dos canais do Discord
        const DISCORD_CHANNELS = ['1330988731376861257', '1328458975615651882'];
        
        // ================= VARI√ÅVEIS GLOBAIS =================
        let socket = null;
        let isConnected = false;
        let userNick = '';
        let reconnectAttempts = 0;
        const maxReconnectAttempts = 10;
        
        // ================= ELEMENTOS DOM =================
        const messagesContainer = document.getElementById('messagesContainer');
        const nickInput = document.getElementById('nickInput');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const statusIndicator = document.getElementById('statusIndicator');
        const statusText = document.getElementById('statusText');
        const connectionStatus = document.getElementById('connectionStatus');
        const welcomeTime = document.getElementById('welcomeTime');
        
        // ================= INICIALIZA√á√ÉO =================
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar hora de boas-vindas
            welcomeTime.textContent = getCurrentTime();
            
            // Carregar nick salvo
            loadSavedNick();
            
            // Configurar event listeners
            setupEventListeners();
            
            // Conectar ao servidor
            connectToServer();
            
            // Adicionar mensagem inicial
            setTimeout(() => {
                addSystemMessage('üí° Digite seu nick e comece a conversar!');
            }, 1500);
        });
        
        // ================= FUN√á√ïES DE CONEX√ÉO =================
        function connectToServer() {
            updateConnectionStatus('Conectando ao servidor...', false);
            
            try {
                socket = new WebSocket(WS_SERVER_URL);
                
                socket.onopen = function() {
                    console.log('‚úÖ Conectado ao servidor WebSocket');
                    updateConnectionStatus('Conectado ao Discord ‚úì', true);
                    isConnected = true;
                    reconnectAttempts = 0;
                    
                    // Enviar inscri√ß√£o nos canais do Discord
                    socket.send(JSON.stringify({
                        type: 'subscribe',
                        channels: DISCORD_CHANNELS
                    }));
                    
                    addSystemMessage('‚úÖ Conex√£o estabelecida com o servidor!');
                };
                
                socket.onmessage = function(event) {
                    try {
                        const data = JSON.parse(event.data);
                        handleServerMessage(data);
                    } catch (error) {
                        console.error('Erro ao processar mensagem:', error);
                    }
                };
                
                socket.onerror = function(error) {
                    console.error('‚ùå Erro na conex√£o:', error);
                    updateConnectionStatus('Erro na conex√£o', false);
                    isConnected = false;
                };
                
                socket.onclose = function() {
                    console.log('üîå Conex√£o fechada');
                    updateConnectionStatus('Desconectado', false);
                    isConnected = false;
                    
                    // Tentar reconectar
                    if (reconnectAttempts < maxReconnectAttempts) {
                        reconnectAttempts++;
                        const delay = Math.min(1000 * reconnectAttempts, 10000);
                        
                        addSystemMessage(`üîÑ Tentando reconectar em ${delay/1000} segundos... (${reconnectAttempts}/${maxReconnectAttempts})`);
                        
                        setTimeout(() => {
                            console.log(`üîÑ Tentativa de reconex√£o ${reconnectAttempts}`);
                            connectToServer();
                        }, delay);
                    } else {
                        addSystemMessage('‚ùå Falha na conex√£o. Recarregue a p√°gina.');
                    }
                };
                
            } catch (error) {
                console.error('‚ùå Erro ao conectar:', error);
                updateConnectionStatus('Falha na conex√£o', false);
                addSystemMessage('‚ö†Ô∏è Modo demonstra√ß√£o ativado (sem servidor real)');
                simulateDemoMode();
            }
        }
        
        // ================= MANIPULA√á√ÉO DE MENSAGENS =================
        function handleServerMessage(data) {
            switch(data.type) {
                case 'discord_message':
                    addDiscordMessage(data.author, data.content, data.timestamp);
                    break;
                    
                case 'connected':
                    addSystemMessage(data.message || 'Conectado ao chat!');
                    break;
                    
                case 'message_sent':
                    if (data.success) {
                        showNotification('‚úÖ Mensagem enviada para o Discord!');
                    } else {
                        showNotification('‚ùå Erro ao enviar mensagem: ' + (data.error || 'Desconhecido'));
                    }
                    break;
                    
                default:
                    console.log('Mensagem desconhecida:', data);
            }
        }
        
        // ================= FUN√á√ïES DE UI =================
        function addMessage(nick, message, timestamp, type = 'user') {
            // Limpar mensagem de boas-vindas se for a primeira mensagem real
            if (messagesContainer.children.length === 1 && 
                messagesContainer.firstChild.classList.contains('system')) {
                messagesContainer.innerHTML = '';
            }
            
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
            
            const time = timestamp || getCurrentTime();
            const discordIcon = type === 'discord' ? '<i class="fab fa-discord"></i> ' : '';
            
            messageElement.innerHTML = `
                <div class="message-header">
                    <span class="message-user">${discordIcon}${nick}</span>
                    <span class="message-time">${time}</span>
                </div>
                <div class="message-content">${formatMessage(message)}</div>
            `;
            
            messagesContainer.appendChild(messageElement);
            scrollToBottom();
        }
        
        function addDiscordMessage(author, content, timestamp) {
            addMessage(author, content, timestamp, 'discord');
        }
        
        function addSystemMessage(message) {
            addMessage('Sistema', message, getCurrentTime(), 'system');
        }
        
        function formatMessage(text) {
            // Formatar links
            const urlRegex = /(https?:\/\/[^\s]+)/g;
            return text.replace(urlRegex, url => {
                const displayUrl = url.length > 40 ? url.substring(0, 37) + '...' : url;
                return `<a href="${url}" target="_blank" rel="noopener">${displayUrl}</a>`;
            });
        }
        
        // ================= FUN√á√ïES DE ENVIO =================
        function sendMessage() {
            const nick = nickInput.value.trim();
            const message = messageInput.value.trim();
            
            // Valida√ß√µes
            if (!nick || nick.length < 2) {
                showNotification('‚ö†Ô∏è Digite um nick com pelo menos 2 caracteres!');
                nickInput.focus();
                return;
            }
            
            if (!message) {
                showNotification('‚ö†Ô∏è Digite uma mensagem!');
                messageInput.focus();
                return;
            }
            
            if (message.length > 500) {
                showNotification('‚ö†Ô∏è Mensagem muito longa! M√°ximo 500 caracteres.');
                return;
            }
            
            // Salvar nick
            saveNick(nick);
            
            // Timestamp
            const timestamp = getCurrentTime();
            
            // Adicionar mensagem localmente
            addMessage(nick, message, timestamp);
            
            // Enviar para o servidor
            if (isConnected && socket && socket.readyState === WebSocket.OPEN) {
                try {
                    socket.send(JSON.stringify({
                        type: 'send_message',
                        nick: nick,
                        message: message,
                        timestamp: timestamp,
                        channel_id: DISCORD_CHANNELS[0]
                    }));
                } catch (error) {
                    console.error('‚ùå Erro ao enviar:', error);
                    showNotification('‚ùå Erro ao enviar mensagem');
                }
            } else {
                showNotification('‚ö†Ô∏è Modo demonstra√ß√£o - Mensagem n√£o enviada ao Discord');
            }
            
            // Limpar e focar
            messageInput.value = '';
            updateSendButton();
            messageInput.focus();
        }
        
        // ================= FUN√á√ïES AUXILIARES =================
        function updateConnectionStatus(text, connected) {
            statusText.textContent = text;
            
            if (connected) {
                statusIndicator.className = 'status-indicator connected';
                connectionStatus.style.background = 'rgba(68, 255, 68, 0.1)';
            } else {
                statusIndicator.className = 'status-indicator';
                connectionStatus.style.background = 'rgba(255, 68, 68, 0.1)';
            }
        }
        
        function showNotification(text) {
            // Remover notifica√ß√µes anteriores
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = text;
            document.body.appendChild(notification);
            
            // Auto-remover ap√≥s 3 segundos
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        function scrollToBottom() {
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function getCurrentTime() {
            return new Date().toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        // ================= LOCAL STORAGE =================
        function saveNick(nick) {
            if (nick && nick !== userNick) {
                userNick = nick;
                localStorage.setItem('furia_chat_nick', nick);
                nickInput.value = nick;
            }
        }
        
        function loadSavedNick() {
            const savedNick = localStorage.getItem('furia_chat_nick');
            if (savedNick) {
                nickInput.value = savedNick;
                userNick = savedNick;
                messageInput.focus();
            } else {
                nickInput.focus();
            }
            updateSendButton();
        }
        
        // ================= EVENT LISTENERS =================
        function setupEventListeners() {
            // Enviar mensagem
            sendButton.addEventListener('click', sendMessage);
            
            // Enviar com Enter
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Salvar nick ao perder foco
            nickInput.addEventListener('blur', function() {
                if (this.value.trim()) {
                    saveNick(this.value.trim());
                }
            });
            
            // Atualizar nick com Enter
            nickInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    messageInput.focus();
                    if (this.value.trim()) {
                        saveNick(this.value.trim());
                    }
                }
            });
            
            // Atualizar bot√£o de enviar
            messageInput.addEventListener('input', updateSendButton);
            nickInput.addEventListener('input', updateSendButton);
        }
        
        function updateSendButton() {
            const hasNick = nickInput.value.trim().length >= 2;
            const hasMessage = messageInput.value.trim().length > 0;
            sendButton.disabled = !hasNick || !hasMessage;
        }
        
        // ================= MODO DEMONSTRA√á√ÉO =================
        function simulateDemoMode() {
            updateConnectionStatus('Modo Demonstra√ß√£o', true);
            
            // Adicionar algumas mensagens de exemplo
            const demoMessages = [
                {
                    nick: 'DiscordBot',
                    message: '‚úÖ Chat conectado em modo demonstra√ß√£o! Para conectar ao Discord real, configure o servidor.',
                    type: 'discord',
                    delay: 1000
                },
                {
                    nick: 'Guerreiro88',
                    message: 'Eae galera! Algu√©m online?',
                    type: 'discord',
                    delay: 3000
                },
                {
                    nick: 'NightWolf',
                    message: 'Site em manuten√ß√£o mas o chat funciona! üëå',
                    type: 'discord',
                    delay: 5000
                },
                {
                    nick: 'FuriaFan',
                    message: 'Visite nosso site: https://furiadanoiteplay.com.br',
                    type: 'discord',
                    delay: 7000
                }
            ];
            
            demoMessages.forEach(msg => {
                setTimeout(() => {
                    if (msg.type === 'discord') {
                        addDiscordMessage(msg.nick, msg.message, getCurrentTime());
                    } else {
                        addMessage(msg.nick, msg.message, getCurrentTime());
                    }
                }, msg.delay);
            });
        }
    </script>
</body>
    </html>
